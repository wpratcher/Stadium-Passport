<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stadium Passport</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1419 100%);
            min-height: 100vh;
            color: #d4af37;
        }

        #root {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .passport-cover {
            background: linear-gradient(145deg, #1e2847 0%, #141b2d 100%);
            border: 3px solid #d4af37;
            border-radius: 12px;
            padding: 60px 40px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
        }

        .passport-title {
            font-size: 3rem;
            font-weight: bold;
            color: #d4af37;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .passport-subtitle {
            font-size: 1.2rem;
            color: #b8945f;
            letter-spacing: 2px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(145deg, #252d47 0%, #1a2035 100%);
            border: 2px solid #d4af37;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #d4af37;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #b8945f;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .league-tabs {
            display: flex;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .league-tab {
            background: #1a2035;
            border: 2px solid #d4af37;
            color: #d4af37;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            letter-spacing: 1px;
        }

        .league-tab:hover {
            background: #252d47;
            transform: translateY(-2px);
        }

        .league-tab.active {
            background: #d4af37;
            color: #1a1f3a;
        }

        .button {
            background: #d4af37;
            color: #1a1f3a;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .button:hover {
            background: #f0c34b;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        .button-secondary {
            background: #1a2035;
            color: #d4af37;
            border: 2px solid #d4af37;
        }

        .button-secondary:hover {
            background: #252d47;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(145deg, #1e2847 0%, #141b2d 100%);
            border: 3px solid #d4af37;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 2rem;
            color: #d4af37;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #d4af37;
            margin-bottom: 8px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            background: #0f1419;
            border: 2px solid #d4af37;
            border-radius: 6px;
            color: #d4af37;
            font-size: 1rem;
            font-family: inherit;
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #f0c34b;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .button-group button {
            flex: 1;
        }

        .stamps-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stamp {
            background: linear-gradient(145deg, #252d47 0%, #1a2035 100%);
            border: 3px dashed #d4af37;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }

        .stamp:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
        }

        .stamp-header-clickable:hover {
            opacity: 0.9;
        }

        .stamp-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stamp-league {
            background: #d4af37;
            color: #1a1f3a;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .stamp-visits {
            background: #1a2035;
            color: #d4af37;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid #d4af37;
        }

        .stamp-stadium {
            font-size: 1.3rem;
            font-weight: bold;
            color: #d4af37;
            margin-bottom: 8px;
        }

        .stamp-city {
            font-size: 0.95rem;
            color: #b8945f;
            margin-bottom: 15px;
        }

        .stamp-game {
            background: #0f1419;
            border: 1px solid #d4af37;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .stamp-teams {
            color: #d4af37;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .stamp-score {
            color: #f0c34b;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .stamp-date {
            font-size: 0.85rem;
            color: #b8945f;
            margin-top: 5px;
        }

        .stamp-notes {
            font-size: 0.9rem;
            color: #9ca3af;
            font-style: italic;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #d4af37;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #b8945f;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-state-text {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .section-title {
            font-size: 1.5rem;
            color: #d4af37;
            margin: 30px 0 20px;
            text-align: center;
            letter-spacing: 2px;
        }

        @media (max-width: 600px) {
            .passport-title {
                font-size: 2rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stamps-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function StadiumPassport() {
            const [view, setView] = useState('home');
            const [activeLeague, setActiveLeague] = useState('ALL');
            const [showAddGameModal, setShowAddGameModal] = useState(false);
            const [games, setGames] = useState([]);
            const [stadiums, setStadiums] = useState([]);
            const [expandedStadium, setExpandedStadium] = useState(null);

            const leagues = ['ALL', 'MLB', 'NFL', 'NBA', 'MLS', 'NHL'];

            // Load data from localStorage on mount
            useEffect(() => {
                const savedGames = localStorage.getItem('stadiumPassportGames');
                const savedStadiums = localStorage.getItem('stadiumPassportStadiums');
                
                if (savedGames) setGames(JSON.parse(savedGames));
                if (savedStadiums) setStadiums(JSON.parse(savedStadiums));
            }, []);

            // Save data to localStorage whenever it changes
            useEffect(() => {
                localStorage.setItem('stadiumPassportGames', JSON.stringify(games));
            }, [games]);

            useEffect(() => {
                localStorage.setItem('stadiumPassportStadiums', JSON.stringify(stadiums));
            }, [stadiums]);

            const addGame = (gameData) => {
                // Check if stadium exists
                const existingStadium = stadiums.find(
                    s => s.name.toLowerCase() === gameData.stadium.toLowerCase() && 
                    s.league === gameData.league
                );

                if (existingStadium) {
                    // Increment visit count
                    setStadiums(stadiums.map(s => 
                        s.name.toLowerCase() === gameData.stadium.toLowerCase() && s.league === gameData.league
                            ? { ...s, visitCount: s.visitCount + 1 }
                            : s
                    ));
                } else {
                    // Create new stadium
                    const newStadium = {
                        name: gameData.stadium,
                        league: gameData.league,
                        city: gameData.city,
                        firstVisit: gameData.date,
                        visitCount: 1
                    };
                    setStadiums([...stadiums, newStadium]);
                }

                // Add game
                const newGame = {
                    id: Date.now(),
                    ...gameData
                };
                setGames([newGame, ...games]);
                setShowAddGameModal(false);
            };

            const getStats = () => {
                const totalStadiums = stadiums.length;
                const totalGames = games.length;
                
                const leagueBreakdown = {};
                leagues.slice(1).forEach(league => {
                    leagueBreakdown[league] = {
                        stadiums: stadiums.filter(s => s.league === league).length,
                        games: games.filter(g => g.league === league).length
                    };
                });

                return { totalStadiums, totalGames, leagueBreakdown };
            };

            const stats = getStats();

            const filteredGames = activeLeague === 'ALL' 
                ? games 
                : games.filter(g => g.league === activeLeague);

            const filteredStadiums = activeLeague === 'ALL'
                ? stadiums
                : stadiums.filter(s => s.league === activeLeague);

            if (view === 'home') {
                return (
                    <div>
                        <div className="passport-cover">
                            <div className="passport-title">STADIUM PASSPORT</div>
                            <div className="passport-subtitle">Your Journey Through Sports</div>
                        </div>

                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-number">{stats.totalStadiums}</div>
                                <div className="stat-label">Total Stadiums</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-number">{stats.totalGames}</div>
                                <div className="stat-label">Total Games</div>
                            </div>
                        </div>

                        <div style={{ display: 'flex', gap: '15px', marginTop: '30px' }}>
                            <button className="button" style={{ flex: 1 }} onClick={() => setShowAddGameModal(true)}>
                                + Log New Game
                            </button>
                            <button className="button-secondary button" style={{ flex: 1 }} onClick={() => setView('stamps')}>
                                View All Stamps
                            </button>
                        </div>

                        {showAddGameModal && <AddGameModal onClose={() => setShowAddGameModal(false)} onSave={addGame} />}
                    </div>
                );
            }

            if (view === 'stamps') {
                return (
                    <div>
                        <div className="passport-cover">
                            <div className="passport-title">YOUR STAMPS</div>
                        </div>

                        <button className="button-secondary button" onClick={() => setView('home')}>
                            ‚Üê Back to Home
                        </button>

                        <div className="league-tabs">
                            {leagues.map(league => (
                                <button
                                    key={league}
                                    className={`league-tab ${activeLeague === league ? 'active' : ''}`}
                                    onClick={() => setActiveLeague(league)}
                                >
                                    {league}
                                </button>
                            ))}
                        </div>

                        {activeLeague !== 'ALL' && (
                            <div className="stats-grid" style={{ marginTop: '30px' }}>
                                <div className="stat-card">
                                    <div className="stat-number">{stats.leagueBreakdown[activeLeague].stadiums}</div>
                                    <div className="stat-label">{activeLeague} Stadiums</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-number">{stats.leagueBreakdown[activeLeague].games}</div>
                                    <div className="stat-label">{activeLeague} Games</div>
                                </div>
                            </div>
                        )}

                        {filteredStadiums.length === 0 ? (
                            <div className="empty-state">
                                <div className="empty-state-icon">üèüÔ∏è</div>
                                <div className="empty-state-text">No stadiums visited yet</div>
                                <p style={{ color: '#9ca3af', marginBottom: '20px' }}>Start logging games to collect stamps!</p>
                                <button className="button" onClick={() => { setView('home'); setShowAddGameModal(true); }}>
                                    Log Your First Game
                                </button>
                            </div>
                        ) : (
                            <div className="stamps-container">
                                {filteredStadiums.map(stadium => {
                                    const stadiumGames = filteredGames.filter(g => 
                                        g.stadium.toLowerCase() === stadium.name.toLowerCase() && 
                                        g.league === stadium.league
                                    );
                                    const stadiumKey = `${stadium.league}-${stadium.name}`;
                                    const isExpanded = expandedStadium === stadiumKey;

                                    return (
                                        <div key={stadiumKey} className="stamp">
                                            <div 
                                                className="stamp-header-clickable" 
                                                onClick={() => setExpandedStadium(isExpanded ? null : stadiumKey)}
                                                style={{ cursor: 'pointer' }}
                                            >
                                                <div className="stamp-header">
                                                    <div className="stamp-league">{stadium.league}</div>
                                                    <div className="stamp-visits">
                                                        {stadium.visitCount} {stadium.visitCount === 1 ? 'visit' : 'visits'}
                                                    </div>
                                                </div>
                                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                                    <div>
                                                        <div className="stamp-stadium">{stadium.name}</div>
                                                        <div className="stamp-city">{stadium.city}</div>
                                                    </div>
                                                    <div style={{ fontSize: '1.5rem', color: '#d4af37', marginLeft: '10px' }}>
                                                        {isExpanded ? '‚ñº' : '‚ñ∂'}
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            {isExpanded && (
                                                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '2px dashed #d4af37' }}>
                                                    {stadiumGames.map(game => (
                                                        <div key={game.id} className="stamp-game">
                                                            <div className="stamp-teams">
                                                                {game.awayTeam} @ {game.homeTeam}
                                                            </div>
                                                            <div className="stamp-score">
                                                                {game.awayScore} - {game.homeScore}
                                                            </div>
                                                            <div className="stamp-date">{game.date}</div>
                                                            {game.notes && (
                                                                <div className="stamp-notes">{game.notes}</div>
                                                            )}
                                                        </div>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {showAddGameModal && <AddGameModal onClose={() => setShowAddGameModal(false)} onSave={addGame} />}
                    </div>
                );
            }
        }

        function AddGameModal({ onClose, onSave }) {
            const [formData, setFormData] = useState({
                league: 'MLB',
                stadium: '',
                city: '',
                state: '',
                homeTeam: '',
                awayTeam: '',
                homeScore: '',
                awayScore: '',
                date: new Date().toISOString().split('T')[0],
                notes: ''
            });

            const handleChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.stadium && formData.city && formData.state && formData.homeTeam && formData.awayTeam) {
                    const gameData = {
                        ...formData,
                        city: `${formData.city}, ${formData.state}` // Combine for display
                    };
                    onSave(gameData);
                }
            };

            return (
                <div className="modal" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-title">LOG NEW GAME</div>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">League</label>
                                <select 
                                    name="league" 
                                    className="form-select" 
                                    value={formData.league}
                                    onChange={handleChange}
                                >
                                    <option value="MLB">MLB</option>
                                    <option value="NFL">NFL</option>
                                    <option value="NBA">NBA</option>
                                    <option value="MLS">MLS</option>
                                    <option value="NHL">NHL</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Stadium Name *</label>
                                <input 
                                    type="text" 
                                    name="stadium"
                                    className="form-input"
                                    value={formData.stadium}
                                    onChange={handleChange}
                                    required
                                    placeholder="e.g., Fenway Park"
                                />
                            </div>

                            <div className="form-row">
                                <div className="form-group">
                                    <label className="form-label">City *</label>
                                    <input 
                                        type="text" 
                                        name="city"
                                        className="form-input"
                                        value={formData.city}
                                        onChange={handleChange}
                                        required
                                        placeholder="e.g., Boston"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">State *</label>
                                    <input 
                                        type="text" 
                                        name="state"
                                        className="form-input"
                                        value={formData.state}
                                        onChange={handleChange}
                                        required
                                        placeholder="e.g., MA"
                                    />
                                </div>
                            </div>

                            <div className="form-row">
                                <div className="form-group">
                                    <label className="form-label">Home Team *</label>
                                    <input 
                                        type="text" 
                                        name="homeTeam"
                                        className="form-input"
                                        value={formData.homeTeam}
                                        onChange={handleChange}
                                        required
                                        placeholder="e.g., Red Sox"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Away Team *</label>
                                    <input 
                                        type="text" 
                                        name="awayTeam"
                                        className="form-input"
                                        value={formData.awayTeam}
                                        onChange={handleChange}
                                        required
                                        placeholder="e.g., Yankees"
                                    />
                                </div>
                            </div>

                            <div className="form-row">
                                <div className="form-group">
                                    <label className="form-label">Home Score</label>
                                    <input 
                                        type="number" 
                                        name="homeScore"
                                        className="form-input"
                                        value={formData.homeScore}
                                        onChange={handleChange}
                                        placeholder="0"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Away Score</label>
                                    <input 
                                        type="number" 
                                        name="awayScore"
                                        className="form-input"
                                        value={formData.awayScore}
                                        onChange={handleChange}
                                        placeholder="0"
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Date</label>
                                <input 
                                    type="date" 
                                    name="date"
                                    className="form-input"
                                    value={formData.date}
                                    onChange={handleChange}
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Notes (Optional)</label>
                                <textarea 
                                    name="notes"
                                    className="form-textarea"
                                    value={formData.notes}
                                    onChange={handleChange}
                                    placeholder="Memorable moments, weather, who you were with..."
                                />
                            </div>

                            <div className="button-group">
                                <button type="button" className="button-secondary button" onClick={onClose}>
                                    Cancel
                                </button>
                                <button type="submit" className="button">
                                    Save Game
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<StadiumPassport />, document.getElementById('root'));
    </script>
</body>
</html>
